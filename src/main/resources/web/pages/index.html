<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <!-- Apple Support -->
    <meta name="apple-mobile-web-app-title" content="FFBExecute">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width">

    <link rel="apple-touch-icon" sizes="180x180" href="/piper/resource/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/piper/resource/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/piper/resource/favicon-16x16.png">
    <link rel="manifest" href="/piper/resource/site.webmanifest">
    <link rel="mask-icon" href="/piper/resource/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/piper/resource/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/piper/resource/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <title>Phone Piper - Web Interface</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">



    <script type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

    <link href="/piper/resource/index.css" rel="stylesheet">
    <link href="/piper/resource/open-iconic-bootstrap.min.css" rel="stylesheet">

    <script type="text/javascript" src="/piper/resource/index.js"></script>

</head>
<body>

<div class="container-fluid">

    <!-- !!!!!!!! -->

    <nav class="navbar navbar-expand-md navbar-dark bg-dark" style="margin-bottom: 1em;">
        <a class="navbar-brand" href="/piper">Phone Piper</a>
        <span class="navbar-brand" id="statusName">Status</span>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExample01">
            <ul class="nav navbar-nav mr-auto" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link notLoaded active oi oi-home" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true"><span class="d-md-none">Home</span></a>
                </li>
                <li class="nav-item notLoaded">
                    <a class="nav-link oi oi-cog" id="config-tab" data-toggle="tab" href="#config" role="tab" aria-controls="config" aria-selected="true"><span class="d-md-none">Configuration</span></a>
                </li>
                <!--
                <li class="nav-item notLoaded">
                    <a class="nav-link" id="files-tab" data-toggle="tab" href="#files" role="tab" aria-controls="files" aria-selected="true">Files</a>
                </li>
                -->
                <li class="nav-item whenRun">
                    <a class="nav-link oi oi-pulse" id="run-tab" data-toggle="tab" href="#run" role="tab" aria-controls="run" aria-selected="false"><span class="d-md-none">Status</span></a>
                </li>
                <li class="nav-item whenRun dropdown">
                    <a class="nav-link dropdown-toggle oi oi-layers" id="dropdownVars" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="d-block d-md-none">Variables</span></a>
                    <div class="dropdown-menu" id="dropdownVarLinks" aria-labelledby="dropdownVars">
                        <a class="nav-link" id="vars-tab" data-toggle="tab" href="#vars" role="tab" aria-controls="vars" aria-selected="false">Variables</a>
                    </div>
                </li>
                <li class="nav-item whenLoaded">
                    <a class="nav-link oi oi-cloud-upload notWhileRunning" id="imports-tab" data-toggle="tab" href="#imports" role="tab" aria-controls="imports" aria-selected="false"><span class="d-md-none">Import</span></a>
                </li>
                <li class="nav-item whenEdit">
                    <a class="nav-link oi oi-pencil" id="edit-tab" data-toggle="tab" href="#edit" role="tab" aria-controls="edit" aria-selected="false"><span class="d-md-none">Edit</span></a>
                </li>
                <!--
                <li class="nav-item whenLoaded">
                    <a class="nav-link oi oi-wifi" id="device-tab" data-toggle="tab" href="#device" role="tab" aria-controls="device" aria-selected="false"><span class="d-md-none">Device</span></a>
                </li>
                -->
                <li class="nav-item whenLoaded">
                    <a class="nav-link oi oi-wifi" id="device-control" data-toggle="tab" href="#control" role="tab" aria-controls="device" aria-selected="false"><span class="d-md-none">Control</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link oi oi-print" id="console-tab" data-toggle="tab" href="#console" role="tab" aria-controls="console" aria-selected="false"><span class="d-md-none">Log</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link oi oi-question-mark" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="console" aria-selected="false"><span class="d-md-none">About</span></a>
                </li>
            </ul>

        </div>

        <span class="navbar-brand d-none d-sm-block" id="loadZone"></span>

    </nav>

    <!-- !!!!!!!! -->

    <div class="tab-content" id="myTabContent">

        <div class="tab-pane fade show active text-center" id="home" role="tabpanel" aria-labelledby="home-tab">

            <div class="col-sm-12">
                <img src="/piper/resource/PhonePiper-Large.png" class="img-fluid" alt="Responsive image"/>
            </div>

            <div class="col-sm-12">
                <h3>Available Configs</h3>
            </div>

            <div class="row text-center" id="config-list">

                <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
                    <div class="card shadow-sm">
                        <div class="card-header">
                            <h4 class="my-0 font-weight-normal">New Configuration</h4>
                        </div>
                        <div class="card-body">
                            <button type="button" id="new-config" class="btn btn-lg btn-block btn-outline-primary oi oi-plus"></button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="tab-pane fade show" id="config" role="tabpanel" aria-labelledby="config-tab">

            <form id="setting-form" class="col-sm-12" style="display:none;">

                <h3>Engine Configuration</h3>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Display Name</span>
                    </div>
                    <input type="text" class="form-control" id="configName" placeholder="Short Description">
                </div>

                <br/>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Config Name</span>
                    </div>
                    <select type="text" class="form-control" id="configConfigName" placeholder="Config name"></select>
                    <div class="input-group-append">
                        <button type="button" id="addConfigButton" class="btn btn-success oi oi-plus"></button>
                        <button type="button" id="downloadConfig" class="btn btn-info oi oi-cloud-download"></button>
                    </div>
                </div>

                <br/>

                <div class="alert alert-dark" role="alert">
                    This is used to store this configuration.  A-Z, a-z, _, - and 0-9 only.
                </div>

                <br/>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">State Name</span>
                    </div>
                    <select type="text" class="form-control" id="configStateName" placeholder="State name"></select>
                    <div class="input-group-append">
                        <button type="button" id="addStateButton" class="btn btn-success oi oi-plus"></button>
                        <button type="button" id="downloadState" class="btn btn-info oi oi-cloud-download"></button>
                    </div>
                </div>

                <br/>

                <div class="alert alert-dark" role="alert">
                    This is used to store the values on the server with a specific name.  A-Z, a-z, _, - and 0-9 only.
                </div>

                <br/>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Device</span>
                    </div>
                    <select class="form-control" id="device1"></select>
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">View</span>
                    </div>
                    <select class="form-control view-item default"></select>
                    <div class="input-group-append">
                        <button type="button" id="addViewButton" class="btn btn-success oi oi-plus"></button>
                        <button type="button" class="btn btn-info edit-view oi oi-pencil"></button>
                    </div>
                </div>
                <div id="addViewHolder">

                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Script</span>
                    </div>
                    <select class="form-control script-item default"></select>
                    <div class="input-group-append">
                        <button type="button" id="addScriptButton" class="btn btn-success oi oi-plus"></button>
                    </div>
                </div>
                <div id="addScriptHolder">

                </div>
                <br/>

                <h3>Application</h3>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">App Package</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-app" placeholder="Target App Package to Execute">
                </div>

                <br/>
                <h3>Helper</h3>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">I.P</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-ip" placeholder="IP address of device">
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ADB Port</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-adbPort" placeholder="5555">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    The ADB port number for your device.  For real devices 5555 is the default.  For MEmu the value can be somewhere near 21503 if your running through NAT mode.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Helper Port</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-helperPort" placeholder="8080">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    The port number for Phone Piper Helper app.  This is typically 8080, unless you changed the MEmu forwarding config for PPH.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Helper</span>
                    </div>
                    <select class="form-control config-attribute" attrname="device-helperType">
                        <option value="REMOTE" selected>Use On Device Helper</option>
                        <option value="LOCAL">Use Local Helper</option>
                        <option value="LOCAL_PNG">Use Local Helper (png)</option>
                        <option value="NOOP">Fake Helper (No-Op)</option>
                    </select>
                </div>

                <br/>
                <h3>ADB</h3>

                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ADB</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-adb" placeholder="Path to ADB execuable">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    Path to your ADB executable.  The full path please.  If ADB is available on PATH, you can leave this blank.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ADB Level</span>
                    </div>
                    <select class="form-control config-attribute" attrname="device-adbLevel">
                        <option value="FULL" selected>Clean Start &amp; Stop</option>
                        <option value="DISCONNECT">Disconnect from Device</option>
                        <option value="LEAVE">Leave it alone</option>
                    </select>
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Connection</span>
                    </div>
                    <select class="form-control config-attribute" attrname="device-wifi">
                        <option value="true" selected>Wifi (Host+Port Required)</option>
                        <option value="false">Direct (Direct optional)</option>
                    </select>
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Direct</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-direct" placeholder="ADB direct value">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    Leave blank in most cases.  Used to identity which device to communicate with, if multiple have been connected.  Set to * for any device.
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    If you are running a real device, or MEmu bridged, please choose Remote.  Otherwise choose USB-Emulated.
                </div>

                <br/>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Throttle</span>
                    </div>
                    <input type="text" class="form-control config-attribute" attrname="device-throttle" placeholder="250">
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    This is the time in MS to throttle the main loop.  The default is 250, or 250 miliseconds.  1000 milliseconds is a second.
                </div>

                <br/>
                <div class="form-group">
                    <button type="button" id="controlLoad" class="btn btn-primary">Run Script</button>
                    <button type="button" id="controlSave" class="btn btn-dark">Save Config</button>
                </div>
            </form>

            <form id="config-download-form" method="POST" action="/piper/configs/download" enctype="application/x-www-form-urlencoded">
                <input type="hidden" name="name" id="config-download-name"/>
            </form>

            <form id="state-download-form" method="POST" action="/piper/states/download" enctype="application/x-www-form-urlencoded">
                <input type="hidden" name="name" id="state-download-name"/>
            </form>

        </div>
        <div class="tab-pane fade" id="run" role="tabpanel" aria-labelledby="run-tab">

            <div class="row">

                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">

                    <div class="card">

                        <div class="card-body">

                            <h5 class="card-title">Engine Controls</h5>

                            <div class="form-group">
                                <label for="states">State</label>
                                <select id="states" class="form-control"></select>
                            </div>
                            <div class="form-group">
                                <button type="button" id="playButton" class="btn notWhileRunning controlPlayPause btn-primary oi oi-media-play" title="Play"></button>
                                <button type="button" id="pauseButton" class="btn whileRunning controlPlayPause btn-primary oi oi-media-pause" title="Pause"></button>
                                <button type="button" id="controlUnload" class="btn btn-danger notWhileRunning oi oi-x" title="Unload"></button>
                                <button type="button" id="controlKill" class="btn btn-danger oi oi-power-standby" title="Force Unload"></button>
                                <button type="button" id="controlDumpState" class="btn btn-secondary oi oi-print" title="Debug Print"></button>
                            </div>


                            <div class="form-group">
                                <button type="button" id="intentButton" class="btn whileRunning controlIntent btn-primary oi oi-timer" title="Intent to Pause"></button>
                            </div>

                        </div>
                    </div>

                </div>

                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 whileRunning">

                    <div class="card">

                        <div class="card-body" id="liveHolder">
                            <h5 class="card-title">Live View</h5>
                            <br/>
                            <img id="liveCanvas" style="width:256px;height:128px;"/>
                        </div>

                    </div>

                </div>

                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 whileRunning">

                    <div class="card">

                        <div class="card-body">
                            <h5 class="card-title">Statistics</h5>
                            <br/>

                            <table>
                                <tr>
                                    <td>Image: </td>
                                    <td id="time_last"></td>
                                </tr>
                                <tr>
                                    <td>Image Average: </td>
                                    <td id="time_avg"></td>
                                </tr>
                                <tr>
                                    <td>Image Samples: </td>
                                    <td id="time_samples"></td>
                                </tr>
                            </table>
                        </div>

                    </div>

                </div>

                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 whileRunning">

                    <div class="card">

                        <div class="card-body">
                            <h5 class="card-title">Last Log</h5>
                            <br/>
                            <div id="last_log"></div>
                        </div>

                    </div>

                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 notWhileRunning">

                    <div class="col-sm-12 notWhileRunning">
                        <h3>Shortcuts</h3>
                    </div>

                    <div class="row text-center notWhileRunning" id="shortcut-list">

                    </div>

                </div>

            </div>

        </div>

        <div class="tab-pane fade" id="device" role="tabpanel" aria-labelledby="device-tab">

            <form id="player-form" class="col-sm-12">

                <h3>ADB</h3>

                <br/>

                <h3>Test Connection</h3>

                <div class="input-group">
                    <button type="button" id="controlUpdatePreview" class="btn btn-info whenLoaded notWhileRunning">Get Screen Preview</button>
                </div>

                <br/>
                <div class="alert alert-dark" role="alert">
                    Use this button to test if this App can communicate with ADB & the Phone Helper App.  If everything works, you should see a image appear below.
                </div>

                <div class="form-group">
                    <img id="previewImage" src="" class="img-fluid" alt="Responsive image">
                </div>


            </form>


        </div>

        <div class="tab-pane fade" id="control" role="tabpanel" aria-labelledby="device-tab">

            <form id="control-form" class="col-md-12 col-lg-12 col-sm-12 col-xs-12">

                <div class="row">

                    <div class="col-lg-5 col-md-8 col-sm-12 col-xs-12 notWhileRunning">

                        <div class="card">

                            <div class="card-body">

                                <h5 class="card-title">Connection Controls</h5>

                                <div class="form-group">
                                    <button type="button" class="btn controlAdb btn-danger whenLoaded" adb="kill">Kill Local</button>

                                    <button type="button" class="btn controlAdb btn-warning whenLoaded" adb="restart">Restart</button>
                                    <!--<button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="usb">USB</button>-->
                                </div>

                                <div class="form-group">


                                    <!--<button type="button" class="btn controlAdb btn-info notWhileRunning whenLoaded" adb="usb">USB</button>-->
                                    <button type="button" class="btn controlAdb btn-info whenLoaded" adb="remote">Enable Remote Access</button>
                                    <button type="button" class="btn controlAdb btn-danger whenLoaded" adb="reboot">Reboot Device</button>

                                    <button type="button" class="btn controlAdb btn-info whenLoaded" adb="devices">List Devices</button>
                                    <button type="button" class="btn controlAdb btn-secondary whenLoaded" adb="status">Status</button>
                                </div>

                            </div>
                        </div>

                    </div>

                    <div class="col-lg-2 col-md-4 col-sm-12 col-xs-12 notWhileRunning">

                        <div class="card">

                            <div class="card-body">

                                <h5 class="card-title">App Controls</h5>

                                <div class="form-group">
                                    <button type="button" class="btn controlAdb btn-primary whenLoaded" adb="appcheck">Open</button>
                                    <button type="button" class="btn controlAdb btn-danger whenLoaded" adb="appclose">Close</button>
                                </div>

                            </div>
                        </div>

                    </div>

                    <div class="col-lg-5 col-md-6 col-sm-12 col-xs-12 notWhileRunning">

                        <div class="card">

                            <div class="card-body">

                                <h5 class="card-title">Device Response</h5>

                                <div class="form-group">
                                    <textarea class="form-control" id="adb-info" rows="3"></textarea>
                                </div>

                            </div>
                        </div>

                    </div>

                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 notWhileRunning">

                        <div class="card">

                            <div class="card-body">

                                <h5 class="card-title">Component Controls</h5>

                                <div class="form-group">
                                    <label for="components">Component</label>
                                    <select id="components" class="form-control notWhileRunning"></select>
                                </div>

                                <div class="form-group">
                                    <button type="button" id="controlTap" controlButton="TAP"
                                            class="btn btn-info notWhileRunning controlButton">Tap
                                    </button>
                                    <button type="button" id="controlSwipeUp" controlButton="SWIPE_UP"
                                            class="btn btn-info notWhileRunning controlButton">Up
                                    </button>
                                    <button type="button" id="controlSwipeRight" controlButton="SWIPE_RIGHT"
                                            class="btn btn-info notWhileRunning controlButton">Right
                                    </button>
                                    <button type="button" id="controlSwipeDown" controlButton="SWIPE_DOWN"
                                            class="btn btn-info notWhileRunning controlButton">Down
                                    </button>
                                    <button type="button" id="controlSwipeLeft" controlButton="SWIPE_LEFT"
                                            class="btn btn-info notWhileRunning controlButton">Left
                                    </button>

                                    <button type="button" id="controlSlowUp" controlButton="SLOW_UP"
                                            class="btn btn-warning notWhileRunning controlButton">Up
                                    </button>
                                    <button type="button" id="controlSlowRight" controlButton="SLOW_RIGHT"
                                            class="btn btn-warning notWhileRunning controlButton">Right
                                    </button>
                                    <button type="button" id="controlSlowDown" controlButton="SLOW_DOWN"
                                            class="btn btn-warning notWhileRunning controlButton">Down
                                    </button>
                                    <button type="button" id="controlSlowLeft" controlButton="SLOW_LEFT"
                                            class="btn btn-warning notWhileRunning controlButton">Left
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 notWhileRunning">

                        <div class="card">

                            <div class="card-body">

                                <h5 class="card-title">Device Controls</h5>

                                <div class="form-group">
                                    <button type="button" id="eventWake" controlButton="wakeup"
                                            class="btn btn-success notWhileRunning eventButton">Wakeup
                                    </button>

                                    <button type="button" id="eventSleep" controlButton="sleep"
                                            class="btn btn-warning notWhileRunning eventButton">Sleep
                                    </button>

                                    <button type="button" id="eventPower" controlButton="power"
                                            class="btn btn-danger notWhileRunning eventButton">Power
                                    </button>

                                    <button type="button" id="eventBack" controlButton="back"
                                            class="btn btn-secondary notWhileRunning eventButton">Back
                                    </button>

                                    <button type="button" id="eventBrighter" controlButton="brighter"
                                            class="btn btn-light notWhileRunning eventButton">Brighter
                                    </button>

                                    <button type="button" id="eventDarker" controlButton="darker"
                                            class="btn btn-dark notWhileRunning eventButton">Darker
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                        <div class="card">

                            <div class="card-body" id="canvasHolder">

                                <h5 class="card-title">Remote Control</h5>

                                <div class="form-group">
                                    <button type="button" class="btn btn-info notWhileRunning" id="RefreshControl">Show Preview</button>
                                    <button type="button" class="btn btn-info notWhileRunning" id="RefreshDownloadControl">Download</button>
                                    <button type="button" class="btn btn-info whileRunning" id="CacheRefreshControl">Show Current</button>
                                    <button type="button" class="btn btn-info whileRunning" id="CacheRefreshDownloadControl">Download</button>
                                </div>

                                <br/>

                                <canvas id="controlCanvas" style="display:none;"></canvas>

                            </div>

                        </div>

                    </div>

                </div>

            </form>
        </div>

        <div class="tab-pane fade" id="edit" role="tabpanel" aria-labelledby="edit-tab">

            <div class="form-group" style="margin-left:16px;">
                <button type="button" id="unloadEdit" class="btn  btn-danger notWhileRunning">Unload</button>
            </div>

            <div id="edit-form" class="col-sm-12" style="display:none;">

                <div class="row">

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 notWhileRunning">
                        <div class="card" style="background-color:#eee;">
                            <div class="card-body">

                                <h5 class="card-title">Screens</h5>

                                <div class="form-group">
                                    <label for="edit-screens">Screens</label>
                                    <select id="edit-screens" class="form-control notWhileRunning"></select>
                                </div>

                                <div class="FileName" id="ScreenName"></div>

                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded prompt-name" editvalue="stubScreen">Stub</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded prompt-value" editvalue="renameScreen" lst="edit-screens">Rename</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="editScreen"       lst="edit-screens">Edit Pixels</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="fixScreen"        lst="edit-screens" title="Test each pixels and remove failures">Filter</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="repairScreen"        lst="edit-screens" title="Test each pixel and look for possible replacements">Repair</button>

                            </div>
                        </div>
                        <br/>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 notWhileRunning">
                        <div class="card" style="background-color:#eee;">
                            <div class="card-body">

                                <h5 class="card-title">Verification</h5>

                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="verifyScreen"     lst="edit-screens">From Disk</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="liveVerifyScreen" lst="edit-screens">From Device</button>

                            </div>
                        </div>
                        <br/>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 notWhileRunning">
                        <div class="card" style="background-color:#eee;">
                            <div class="card-body">

                                <h5 class="card-title">Update Image</h5>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="updateScreen"     lst="edit-screens">From Device</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="cacheScreen"     lst="edit-screens">From Cache</button>
                                <button type="button" class="btn btn-info edit-action notWhileRunning whenLoaded" editvalue="cacheScreen"     lst="edit-screens">From Cache</button>

                                <p></p>

                                <form id="screenUploadForm" class="uploadBase" method="POST" enctype="multipart/form-data" target="uploadTarget">
                                    <div class="input-group">
                                        <input type="file" name="file">
                                        <div class="input-group-append">
                                            <button type="button" id="uploadScreenButton" lst="edit-screens" class="btn btn-success oi oi-plus"></button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                        <br/>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 notWhileRunning">
                        <div class="card" style="background-color:#eee;">
                            <div class="card-body">

                                <h5 class="card-title">Import/Export</h5>

                                <p></p>

                                <textarea id="screenExtractArea"></textarea>

                                <div class="form-group">
                                    <button type="button" id="extractScreen" class="btn btn-info notWhileRunning whenLoaded" lst="edit-screens">Export Screen</button>
                                    <button type="button" id="importScreen" class="btn btn-info notWhileRunning whenLoaded" lst="edit-screens">Import Screen</button>
                                </div>

                            </div>
                        </div>
                        <br/>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 notWhileRunning">
                        <div class="card">
                            <div class="card-body">

                                <h5 class="card-title">Components</h5>

                                <div class="form-group">
                                    <label for="edit-components">Components</label>
                                    <select id="edit-components" class="form-control notWhileRunning"></select>
                                </div>

                                <div class="FileName" id="ComponentName"></div>

                                <button type="button" class="edit-action notWhileRunning btn btn-info notWhileRunning whenLoaded prompt-name" editvalue="stubComponent">Stub</button>
                                <button type="button" class="edit-action notWhileRunning btn btn-info notWhileRunning whenLoaded" lst="edit-components" editvalue="editComponent">Edit</button>


                            </div>
                        </div>
                        <br/>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 notWhileRunning">
                        <div class="card">
                            <div class="card-body">

                                <h5 class="card-title">Update Image</h5>

                                <button type="button" class="edit-action notWhileRunning btn btn-info notWhileRunning whenLoaded" lst="edit-components" editvalue="updateComponent">From Device</button>

                                <p></p>

                                <form id="componentUploadForm" class="uploadBase col-sm-12" method="POST" enctype="multipart/form-data" target="uploadTarget">
                                    <div class="input-group">
                                        <input type="file" name="file">
                                        <div class="input-group-append">
                                            <button type="button" id="uploadComponentButton" lst="edit-components" class="btn btn-success oi oi-plus"></button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                        <br/>
                    </div>

                </div>

            </div>

            <div style="display:none;">
                <iframe name="uploadTarget"></iframe>
            </div>

            <form method="POST" action="/piper/screen/download" target="downloadScreenFrame" id="downloadScreenForm"></form>

            <div style="display:none;">
                <iframe name="downloadScreenFrame"></iframe>
            </div>

        </div>
        <div class="tab-pane fade" id="vars" role="tabpanel" aria-labelledby="vars-tab">
            <div class="row">
                <form id="variable-form" class="col-sm-12" style="display:none;">
                    <div id="variable-container" class="container-fluid">

                    </div>
                </form>
            </div>
        </div>

        <div class="tab-pane fade" id="imports" role="tabpanel" aria-labelledby="imports-tab">
            <div class="row">
                <form id="import-form" class="col-sm-12">

                    <textarea id="import-text-area" cols="80" rows="6"></textarea>

                    <div class="input-group">
                        <button type="button" class="btn import-action btn-info notWhileRunning whenLoaded">Import</button>
                    </div>

                </form>
            </div>
        </div>

        <div class="tab-pane fade" id="console" role="tabpanel" aria-labelledby="console-tab">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-md-4">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Console</span>
                            </div>
                            <select id="consoleLogging" class="form-control logging" mode="console">
                                <option value="ERROR">Error</option>
                                <option value="INFO" selected>Info</option>
                                <option value="DEBUG">Debug</option>
                                <option value="TRACE">Trace</option>
                                <option value="OFF">Off</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Web</span>
                            </div>
                            <select id="webLogging" class="form-control logging" mode="web">
                                <option value="ERROR">Error</option>
                                <option value="INFO" selected>Info</option>
                                <option value="DEBUG">Debug</option>
                                <option value="TRACE">Trace</option>
                                <option value="OFF">Off</option>
                            </select>
                            <div class="input-group-append">
                                <button type="button" class="update-status notWhileRunning btn btn-info notWhileRunning" id="update-logs">Update</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">File</span>
                            </div>
                            <select id="fileLogging" class="form-control logging" mode="file">
                                <option value="ERROR">Error</option>
                                <option value="INFO" selected>Info</option>
                                <option value="DEBUG">Debug</option>
                                <option value="TRACE">Trace</option>
                                <option value="OFF">Off</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div id="logs" class="container-fluid"></div>
        </div>
        <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">

            <div class="jumbotron">
                <div class="container">
                    <h1 class="display-3">People</h1>
                </div>
            </div>

            <div class="container">
                <!-- Example row of columns -->
                <div class="row">
                    <div class="col-md-4">
                        <h2>Michael Fuller</h2>
                        <p>Creator</p>
                        <p><a href="https://twitter.com/mgatelabs">Twitter</a>, <a href="https://www.reddit.com/user/MGateLabs">Reddit</a></p>
                        <h5>Other Projects</h5>
                        <p>Mobile VR Station, <a href="https://itunes.apple.com/us/app/mobile-vr-station/id959820493?mt=8" target="_blank">iOS</a> &amp; <a href="https://play.google.com/store/apps/details?id=com.mgatelabs.mobilevrstation&hl=en_US" target="_blank">Android</a>.</p>
                        <!--
                        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                        -->
                    </div>
                    <!--
                    <div class="col-md-4">
                        <h2>Heading</h2>
                        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                    </div>
                    <div class="col-md-4">
                        <h2>Heading</h2>
                        <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
                    </div>
                    -->
                </div>

                <hr>

            </div>

        </div>
    </div>


</div>

<div style="display:none; font-weight: bold; line-height: 28px; overflow: hidden; position: fixed; left: 10px; right: 10px;  bottom: 10px; height: 48px; border: 1px solid black; background-color: #eee; border-radius: 5px; padding: 8px;" id="toast">

</div>

</body>
</html>